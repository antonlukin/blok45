(()=>{function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x,L;"undefined"!=typeof Swiper&&(x=new Map,L=new Map,document.querySelectorAll("[data-single-swiper]").forEach(function(r){var e,t,i,a,s,n,o,l,d,u,c,p,b,f,w=r.querySelector('[data-swiper="main"]');function y(){u&&(p?(u.classList.remove("is-disabled"),u.removeAttribute("aria-disabled"),u.removeAttribute("tabindex"),u.setAttribute("href",p),b?u.setAttribute("download",b):u.removeAttribute("download")):(u.setAttribute("aria-disabled","true"),u.setAttribute("tabindex","-1"),u.classList.add("is-disabled"),u.removeAttribute("href"),u.removeAttribute("download")))}function m(){a&&(a.hidden=!0,a.setAttribute("aria-hidden","true"),a.classList.remove("is-visible"),d)&&(d.setAttribute("aria-expanded","false"),d.classList.remove("is-open"))}function v(i){var r;a&&0!==s.length&&(r=!1,s.forEach(function(e){var t=e.getAttribute("data-swiper-exif-field"),t=t&&i[t]?i[t]:l,e=(e.textContent=t,e.closest("[data-swiper-exif-row]")),t=t===l;e&&e.classList.toggle("is-empty",t),t||(r=!0)}),n)&&(n.style.display=r?"none":"")}function h(){v({})}function A(e){d&&(e?(d.classList.add("is-disabled"),d.setAttribute("aria-disabled","true")):(d.classList.remove("is-disabled"),d.removeAttribute("aria-disabled")))}function S(t){t=r.querySelector('[data-swiper="main"] .swiper-slide[data-index="'+t+'"]:not(.swiper-slide-duplicate)');if(t){if(c=Number(t.getAttribute("data-attachment")||0),p=t.getAttribute("data-full")||"",t=(t=t.querySelector("img"))?t.getAttribute("alt"):"",p)try{var e=new URL(p,window.location.origin),i=e.pathname?e.pathname.split("/").pop():"";b=i||t||""}catch(e){b=t||""}else b="";y(),A(c<=0),m(),h()}else c=0,A(!(b=p="")),m(),h(),y();d&&(d.classList.remove("is-loading"),d.removeAttribute("aria-busy"))}w&&(i=1<(o=w.querySelectorAll(".swiper-slide[data-index]").length),e=null,(t=r.querySelector('[data-swiper="thumbs"]'))&&i&&(e=new Swiper(t,{direction:"horizontal",spaceBetween:8,slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0,watchSlidesVisibility:!0,slideToClickedSlide:!0,breakpoints:{0:{spaceBetween:6},720:{spaceBetween:8}},a11y:{enabled:!1}})),t={loop:i,spaceBetween:10,speed:500,grabCursor:!0,slidesPerView:1,keyboard:{enabled:!0,onlyInViewport:!0}},i&&(t.loopedSlides=o),i?(o=r.querySelector(".swiper-button-prev"),i=r.querySelector(".swiper-button-next"),o&&i&&(t.navigation={prevEl:o,nextEl:i})):r.querySelectorAll(".swiper-button-prev, .swiper-button-next").forEach(function(e){e.style.display="none"}),e&&(t.thumbs={swiper:e}),a=w.querySelector("[data-swiper-exif-panel]"),s=a?Array.from(a.querySelectorAll("[data-swiper-exif-field]")):[],n=a?a.querySelector("[data-swiper-exif-empty]"):null,o=a?a.querySelector("[data-swiper-exif-close]"):null,l=a&&a.getAttribute("data-swiper-exif-placeholder")||"â€”",d=w.querySelector("[data-swiper-exif-trigger]"),u=w.querySelector("[data-swiper-download]"),c=0,b=p="",f=new Swiper(w,t),e&&f.on("slideChangeTransitionStart",function(){e.slideTo(f.realIndex)}),S(f.realIndex||0),f.on("slideChange",function(){S(f.realIndex)}),d&&d.addEventListener("click",function(e){var t,i;e.preventDefault(),d.classList.contains("is-disabled")||c<=0||(a&&a.classList.contains("is-visible")?m():(e=function(e){v(e||{}),a&&(a.hidden=!1,a.setAttribute("aria-hidden","false"),a.classList.add("is-visible"),d)&&(d.setAttribute("aria-expanded","true"),d.classList.add("is-open"))},x.has(c)?e(x.get(c)):(d.classList.add("is-loading"),d.setAttribute("aria-busy","true"),((t=c)?x.has(t)?Promise.resolve(x.get(t)):L.has(t)?L.get(t):(i=window.fetch("/wp-json/b45/v1/exif/"+t).then(function(e){if(e.ok)return e.json();throw new Error("Request failed")}).then(function(e){e=e&&e.meta&&"object"===g(e.meta)?e.meta:{};return x.set(t,e),L.delete(t),e}).catch(function(){return L.delete(t),{}}),L.set(t,i),i):Promise.resolve({})).then(e).finally(function(){d.classList.remove("is-loading"),d.removeAttribute("aria-busy")}))))}),o&&o.addEventListener("click",function(e){e.preventDefault(),m()}),a&&a.addEventListener("click",function(e){e.target===a&&m()}),w.addEventListener("keydown",function(e){"Escape"===e.key&&a&&a.classList.contains("is-visible")&&(e.stopPropagation(),m())}))}))})();